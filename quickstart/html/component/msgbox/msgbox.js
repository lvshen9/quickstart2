(function(a){if(typeof(a.msgbox)=="undefined"){a.msgbox=function(c,b){return new a.msgbox.fn.construct(c,b);};a.msgbox.fn={construct:function(d,c){this.id=(d?d:"wade_msgbox_simple");if(a("#"+d).length<=0){var b='<div class="c_msgBox" id="'+this.id+'" name="'+this.id+'" isComponent="false" style="display:none;">'+'<div class="c_msgBoxContent">'+'<div class="c_msgBoxTitle">'+'<div id="'+this.id+'_title" class="text"></div>'+'<div class="fn">'+'<a id="'+this.id+'_close" href="#nogo" class="close"></a>'+"</div>"+"</div>"+'<div class="c_msgBoxWrapper">'+'<iframe src="" page="" subsys="" listenerName="" params="" style="width:100%; height:100%; display:none;"></iframe>'+'<div id="'+this.id+'_article" class="c_article" style="display:none;"></div>'+'<div id="'+this.id+'_submit" class="c_submit" style="display:none;">'+"</div>"+'<input id="'+this.id+'_customData" type="hidden" value="" />'+"</div>"+"</div>"+'<div class="c_msgBoxShadow"></div>'+"</div>";
a(document.body).append(b);window["MsgBox_"+this.id]=this;}this.init(c);},get:function(b){return window["MsgBox_"+b];},setTitle:function(c){var b="";if(c&&a.isString(c)){b=c;}a("#"+this.id+"_title").text(b);},hideDefaultButton:function(){if(this.defaultBtnShow&&this.isComponent==true){this.defaultBtns.css("display","none");
this.defaultBtnShow=false;this.buttonCountChanged();}},showDefaultButton:function(){if(this.defaultBtnShow==false&&this.isComponent==true){this.defaultBtns.css("display","");this.defaultBtnShow=true;this.buttonCountChanged();}},removeCustomButtons:function(){var b=a("#"+this.id+"_submit button");for(var c=0;
c<b.length;c++){var d=a(b[c]);if(d.attr("default")!="true"){d.remove();}}this.buttonCountChanged();},addCustomButton:function(c){var g=a("#"+this.id+"_submit");var f=c["text"];if(f==undefined){alert("Can not add button to MsgBox "+this.id+" , because text is undefined!");return;}var b=c["onclick"]==undefined?"":c["onclick"];
var d=c["className"]==undefined?"":c["className"];var e=a('<button onclick="'+b.replace(/\"/g,"'")+'" type="button"><i class="'+d+'"></i><span>'+f+"</span></button>");e.appendTo(g);this.buttonCountChanged();},setCustomButtons:function(c){if(!(a.isArray(c))&&!(c instanceof a.DatasetList)){alert("can not set custom buttons for MsgBox "+this.id+", buttons must be Array or DatasetList!");
return;}this.removeCustomButtons();for(var b=0;b<c.length;b++){var d=c instanceof a.DatasetList?c.get(b):c[b];this.addCustomButton(d);}},buttonCountChanged:function(){var b=a("#"+this.id+"_submit");if(this.defaultBtnShow==false&&this.defaultBtns.length==b.children().length){b.css("display","none");}else{b.css("display","");
}},open:function(b,c){if(this.isOpen()){return;}if(a.isString(b)&&a.trim(b)!=""){this.identifier=b;}if(c==undefined&&this.isComponent==false){c=false;}if(c==false){a("#"+this.id).css("display","");a.msgbox.fn.events.onMsgBoxOpen(this);}else{if(c==true){a("#"+this.id).css("display","none");}else{var d=this;
this.doAjaxSubmit("actionType=hasShow",function(e){a.endPageLoading();if(e.get("result")!=true){a("#"+d.id).css("display","");a.msgbox.fn.events.onMsgBoxOpen(d);}},function(g,f){a.showErrorMessage(f);a.endPageLoading();});}}},close:function(){if(this.isOpen()==false){return;}a("#"+this.id).css("display","none");
a.msgbox.fn.events.onMsgBoxClose(this);this.empty();this.layoutBoxes();},empty:function(){this.setTitle(null);this.setArticle(null);this.setUrl(null);this.removeCustomButtons();if(this.isComponent==true){this.showDefaultButton();}this.setCustomData(null);},layoutBoxes:function(){var d=window.g_opened_msgboxes;
if(d&&d.length>0){var b=0;a("#"+d.get(d.length-1).id).css("bottom",0);for(var c=d.length-1;c>0;c--){b+=(a("#"+d.get(c).id).height()+1);a("#"+d.get(c-1).id).css("bottom",b);}}},isOpen:function(){return a("#"+this.id).css("display")!="none";},setArticle:function(b){var c=a("#"+this.id+"_article");c.html("");
var f="none";if(b&&a.isString(b)){var e=a("#"+b);if(e.length){var d=e.clone(true);e.remove();c.append(d);f="";}}c.css("display",f);},getArticle:function(){return a("#"+this.id+"_article").html();},setPage:function(c,b,d,f){if(b&&a.isString(b)&&!(""==a.trim(b))){var e=a("#"+this.id+" iframe");c=(c&&a.isString(c))?c:null;
d=(d&&a.isString(d))?d:null;f=(f&&a.isString(f))?f:null;e.attr("src",a.redirect.buildUrl(c,b,d,f));e.css("display","");}},setUrl:function(c){var e=a("#"+this.id+" iframe");var b="about:blank";var d="none";if(c&&a.isString(c)&&!(""==a.trim(c))){b=c;d="";}e.attr("src",b);e.css("display",d);},getUrl:function(){return a("#"+this.id+" iframe").attr("src");
},setCustomData:function(b){var c="";if(b){c=b;}a("#"+this.custDataId).val(c);},getCustomData:function(){return a("#"+this.custDataId).val();},getContentData:function(){var d="";if(this.identifier==undefined){var b=this.getUrl();var c=this.getArticle();if(b){d+=b;}if(c){d+=c;}}else{d=this.identifier;
}return d;},init:function(g){this.isComponent=a("#"+this.id).attr("isComponent")=="true";this.defaultBtns=a("#"+this.id+" button[default=true]");this.defaultBtnShow=true;this.custDataId=this.id+"_customData";if(g){this.afterAction=a.isFunction(g)?g:new Function("return "+g+";");}if(this.isComponent==true){var f=a("#"+this.id+" div[divid]");
if(f.length){var c=f.attr("divid");this.setArticle(c);}if(a("#"+this.id).attr("showDefaultButton")=="false"){this.hideDefaultButton();}}var e=a("#"+this.id+"_close");e.unbind("click");e.bind("click",a.msgbox.fn.events.onCloseClick);if(this.isComponent==true){var b=a("#"+this.id+"_ok");b.unbind("click");
b.bind("click",a.msgbox.fn.events.onOkClick);var d=a("#"+this.id+"_cancel");d.unbind("click");d.bind("click",a.msgbox.fn.events.onCancelClick);}this.layoutBoxes();},doAjaxSubmit:function(e,f,b){var d=this;var c="&content="+d.getContentData()+"&customData="+d.getCustomData()+"&wade_renderType=1";if(e&&a.isString(e)&&!(""==a.trim(e))){c=e.match("^&")=="&"?c+e:c+"&"+e;
}ajaxSubmit(null,null,c,d.id,f,b);},events:{onOkClick:function(b){var d=a(this).parents("div[class=c_msgBox]").attr("id");var c=a.msgbox.get(d);if(c.afterAction&&c.afterAction.call(this,b)==false){return;}c.doAjaxSubmit("actionType=ok",function(e){a.endPageLoading();c.close();},function(g,f){a.showErrorMessage(f);
a.endPageLoading();});},onCancelClick:function(b){var d=a(this).parents("div[class=c_msgBox]").attr("id");var c=a.msgbox.get(d);if(c.afterAction&&c.afterAction.call(this,b)==false){return;}c.doAjaxSubmit("actionType=noshow",function(e){a.endPageLoading();c.close();},function(g,f){a.showErrorMessage(f);
a.endPageLoading();});},onCloseClick:function(b){var d=a(this).parents("div[class=c_msgBox]").attr("id");var c=a.msgbox.get(d);if(c.afterAction&&c.afterAction.call(this,b)==false){return;}if(c.isComponent==false){c.close();return;}c.doAjaxSubmit("actionType=close",function(e){a.endPageLoading();c.close();
},function(g,f){a.showErrorMessage(f);a.endPageLoading();});},onMsgBoxOpen:function(b){if(window.g_opened_msgboxes==undefined){window.g_opened_msgboxes=new a.DatasetList();}window.g_opened_msgboxes.add(b);b.layoutBoxes();},onMsgBoxClose:function(b){if(window.g_opened_msgboxes==undefined){window.g_opened_msgboxes=new a.DatasetList();
}window.g_opened_msgboxes.remove(b);}}};a.msgbox.fn.construct.prototype=a.msgbox.fn;a.msgbox.get=a.msgbox.fn.get;}})(Wade);