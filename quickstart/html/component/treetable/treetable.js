(function(d){if(typeof(d.treetable)=="undefined"){d.treetable=function(f,e){return new d.treetable.fn.construct(f,e);};var a=new d.DataMap();function c(){if(a.length>0){a["isrunning"]=true;a.each(function(e){if(e.length>0){e.each(function(f){e.remove(f);var h=f[0];var i=f[1];var g=f[2];var j=f[3];b(h,i,g,j);
});if(e.length<=0){a.remove(e);}}});if(a.length>0){c();}a["isrunning"]=false;}}function b(l,o,q,n){var j=q.get("showCheckBox");var f=l.attr("idValue");var i,t,m;var k,e,g;if(l.attr("name")==("Table_Ico_"+f)){i=l;if(j){t=l.next();m=l.next().next();}else{m=l.next();}}else{if(l.attr("name")==f){i=l.prev();
t=l;m=l.next();}else{if(l.attr("name")==("Table_Text_"+f)){if(j){i=l.prev().prev();t=l.prev();}else{i=l.prev();}m=l;}else{i=l;t=l;m=l;}}}k=i.attr("action");if(t){e=t.attr("action");}g=m.attr("action");var r=l.parents("tr")[0].rowIndex;var s=o.context;if("0"!=s.x_resultcode){alert(d.lang.get("view.web.comp.tree.failload",treeId)+s.x_resultinfo);
}else{var h=d.treetable.get(q.get("table"));var p=h.getRowData(undefined,r).get(h.column_tree_node_index);d.each(o.data,function(F,G){G[h.column_tree_node_index]=p+"."+(F+1);var v=q.get("showCheckBox");var w=q.get("checkBoxType");var z=l.attr("nodeId")+"○"+G[q.get("nodeId")];var u=parseInt(q.get("level"),10)+1;
var C=q.get("itemId");var y;if(C&&C!="null"){y=G[C];}var B=parseInt(G[q.get("nodeCount")],10);if(B!=0&&!B){B=1;}var A=[];A[h.column_tree_node_name]="level level-"+u+(B>0?" fold":" file");var D=d.treetable.fn.buildNodeData(l,G);var x="";x+='<a href="#nogo" class="ico" onclick="return $.treetable.fn.onIcoClick($(this));"';
x+=' parentNodeId="'+l.attr("nodeId")+'"';x+=' nodeId="'+z+'"';x+=' parameters="'+l.attr("parameters")+'"';x+=' action="'+k+'"';x+=' expandAfterAction="'+l.attr("expandAfterAction")+'"';x+=' node="'+D+'"';if(y){x+=' id="Table_Ico_'+y+'"';}else{x+=' id="Table_Ico_'+l.attr("idValue")+'"';}x+=' name="Table_Ico_'+l.attr("idValue")+'"';
x+=' idValue="'+l.attr("idValue")+'"';x+="></a>\n";if(v&&v=="true"){var E=l.next().attr("checked");if(w=="radio"){x+='<input type="radio" class="e_radio" onclick="return $.treetable.fn.onCheckBoxClick($(this));"';}else{x+='<input type="checkbox" class="e_checkbox" onclick="return $.treetable.fn.onCheckBoxClick($(this));"';
}x+=' parentNodeId="'+l.attr("nodeId")+'"';x+=' nodeId="'+z+'"';x+=' parameters="'+l.attr("parameters")+'"';x+=' action="'+e+'"';x+=' expandAfterAction="'+l.attr("expandAfterAction")+'"';x+=' node="'+D+'"';if(y){x+=' id="'+y+'"';}else{x+=' id="'+l.attr("idValue")+'"';}x+=' name="'+l.attr("idValue")+'"';
x+=' idValue="'+l.attr("idValue")+'"';if(E&&E==true){x+=' checked="true"';}x+="/>\n";}x+='<a href="#nogo" class="text" onclick="return $.treetable.fn.onTextClick($(this));"';x+=' parentNodeId="'+l.attr("nodeId")+'"';x+=' nodeId="'+z+'"';x+=' parameters="'+l.attr("parameters")+'"';x+=' action="'+g+'"';
x+=' expandAfterAction="'+l.attr("expandAfterAction")+'"';x+=' node="'+D+'"';if(y){x+=' id="Table_Text_'+y+'"';}else{x+=' id="Table_Text_'+l.attr("idValue")+'"';}x+=' name="Table_Text_'+l.attr("idValue")+'"';x+=' idValue="'+l.attr("idValue")+'"';x+=">"+G[q.get("nodeText")]+"</a>\n";G[h.column_tree_node_name]=x;
if(n){h.addRow(G,(parseInt(r)+F),A);}else{h.addRow(G,(parseInt(h.getTable().attr("selected"),10)+F),A);}z=null;u=null;B=null;A=null;x=null;v=null;});l.attr("complete","true");i.attr("complete","true");if(t){t.attr("complete","true");}m.attr("complete","true");if(l.parent().attr("expandAfterAction")){d.treetable.fn.triggerExpandAfterAction(l.parent());
}else{if(l.attr("expandAfterAction")){d.treetable.fn.triggerExpandAfterAction(l);}}}}d.treetable.fn={construct:function(f,e){d.extend(this,e);d.table.fn.construct.call(this);},buildNodeParams:function(f){var e=d.DataMap(f.attr("node"));var h="";if(f&&f.length){var g=f.attr("nodeId");if(g&&g.indexOf("○")!=-1){g=g.substring(g.lastIndexOf("○")+1);
}h+="&Tree_Parent_NodeID="+e.get("parentId");h+="&Tree_NodeID="+g;if(f.attr("parameters")&&f.attr("parameters")!=""){h+="&"+f.attr("parameters");}}else{h+="&Tree_Parent_NodeID";h+="&Tree_NodeID";}return h;},buildNodeData:function(h,e){var g=d.DataMap(h.attr("node"));var f=parseInt(e[g.get("nodeCount")],10);
if(!f){f=1;}var i="{";i+="checkBoxType:'"+g.get("checkBoxType")+"',";i+="showCheckBox:'"+g.get("showCheckBox")+"',";i+="nodeLevel:'"+g.get("nodeLevel")+"',";i+="parentNodeId:'"+g.get("parentNodeId")+"',";i+="nodeText:'"+g.get("nodeText")+"',";i+="nodeCount:'"+g.get("nodeCount")+"',";i+="table:'"+g.get("table")+"',";
i+="nodeId:'"+g.get("nodeId")+"',";i+="itemId:'"+g.get("itemId")+"',";i+="parentId:'"+e[g.get("parentNodeId")]+"',";i+="level:'"+(parseInt(g.get("level"),10)+1)+"',";i+="count:'"+f+"',";i+="listener:'"+g.get("listener")+"'";i+="}";return i;},expandNodes:function(h,j){var e=h.attr("complete");if(e&&e=="true"){d.treetable.fn.hideChildNode(h,false);
e=null;var i=h.parent().attr("class");h.parent().attr("class",i.replace(" fold"," unfold"));i=null;if(h.parent().attr("expandAfterAction")){d.treetable.fn.triggerExpandAfterAction(h.parent());}else{if(h.attr("expandAfterAction")){d.treetable.fn.triggerExpandAfterAction(h);}}return;}var g=d.DataMap(h.attr("node"));
var f=g.get("table");d.ajax.post(null,g.get("listener"),d.treetable.fn.buildNodeParams(h),null,function(l){var k=a.get(f);if(k){k.add([h,l,g]);}else{k=new d.DatasetList();k.add([h,l,g,j]);a.put(f,k);}if(!a["isrunning"]){c();}},null,{dataType:"json",simple:true});var i=h.parent().attr("class");h.parent().attr("class",i.replace(" fold"," unfold"));
i=null;},hideChildNode:function(f,j){var l=d.DataMap(f.attr("node"));var e=d.treetable.get(l.get("table"));var m=f.attr("nodeId");var g=f.parent().parent();if(g&&d.nodeName(g[0],"tr")){for(var h=g[0].rowIndex+1;h<e.getTable()[0].rows.length;h++){var n=e.getCellByRowIndex(h,e.column_tree_node_name);var k=d("a[id^=Table_Ico_]",n[0]);
if(k.attr("parentNodeId")==m){d.treetable.fn.hideChildNode(k,j);if(j==true){d(e.getTable()[0].rows[h]).css("display","none");}else{d(e.getTable()[0].rows[h]).css("display","");}n=null;k=null;}}}l=null;e=null;m=null;g=null;},unexpandNodes:function(e){d.treetable.fn.hideChildNode(e,true);var f=e.parent().attr("class");
e.parent().attr("class",f.replace(" unfold"," fold"));f=null;return;},checkNodes:function(h,n){var m=d.DataMap(h.attr("node"));var e=m.get("showCheckBox");var f=m.get("checkBoxType");if(!e||e!="true"){e=null;f=null;return;}if(f&&f=="radio"){h.attr("checked",n);e=null;f=null;return;}var g=d.treetable.get(m.get("table"));
var p=h.attr("nodeId");var j=h.parent().parent();if(j&&d.nodeName(j[0],"tr")){for(var k=j[0].rowIndex+1;k<g.getTable()[0].rows.length;k++){var o=g.getCellByRowIndex(k,g.column_tree_node_name);var l=d("input[type=checkbox],input[type=radio]",o[0]);if(l.attr("parentNodeId")==p){d.treetable.fn.checkNodes(l,n);
if(n==true){l.attr("checked",true);}else{l.attr("checked",false);}o=null;l=null;}}}m=null;g=null;p=null;j=null;e=null;f=null;},onIcoClick:function(f){if(d.treetable.fn.triggerIcoAction(f)==false){return false;}if(f.attr("nodeCount")=="0"){return false;}var e=f.parent().attr("class");if(e&&e.indexOf("file")!=-1){return true;
}if(e.indexOf(" unfold")==-1){d.treetable.fn.expandNodes(f,true);}else{d.treetable.fn.unexpandNodes(f);}return true;},onTextClick:function(f){if(d.treetable.fn.triggerTextAction(f)==false){return false;}if(f.attr("nodeCount")=="0"){return false;}var e=f.parent().attr("class");if(e&&e.indexOf("file")!=-1){return true;
}if(e.indexOf(" unfold")==-1){d.treetable.fn.expandNodes(f,true);}return true;},onCheckBoxClick:function(e){if(!d.treetable.fn.triggerCheckBoxAction(e)){return false;}d.treetable.fn.checkNodes(e,e.attr("checked"));return true;},triggerIcoAction:function(e){if(e&&e.length&&e.attr("action")&&d.isString(e.attr("action"))){return new Function("var node=arguments[0];return "+e.attr("action"))(e);
}return true;},triggerCheckBoxAction:function(e){if(e&&e.length&&e.attr("action")&&d.isString(e.attr("action"))){return new Function("var node=arguments[0];return "+e.attr("action"))(e);}return true;},triggerTextAction:function(e){if(e&&e.length&&e.attr("action")&&d.isString(e.attr("action"))){return new Function("var node=arguments[0];return "+e.attr("action"))(e);
}return true;},triggerExpandAfterAction:function(f){var e=f.attr("expandAfterAction");if(f&&f.length&&e&&d.isString(e)){return new Function("var node=arguments[0];return "+e)(f);}return true;}};d.treetable.get=d.table.fn.get;d.extend(d.treetable.fn,d.table.fn);d.treetable.fn.construct.prototype=d.treetable.fn;
}})(Wade);