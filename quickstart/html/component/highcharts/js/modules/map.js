(function(b){var f,g=b.Axis,d=b.Chart,k=b.each,i=b.extend,j=b.merge,e=b.pick,h=b.numberFormat,c=b.getOptions(),l=c.plotOptions,a=b.Color,m=function(){};c.mapNavigation={enabled:false,buttonOptions:{align:"right",verticalAlign:"bottom",x:0,width:18,height:18,style:{fontSize:"15px",fontWeight:"bold",textAlign:"center"}},buttons:{zoomIn:{onclick:function(){this.mapZoom(0.5);
},text:"+",y:-32},zoomOut:{onclick:function(){this.mapZoom(2);},text:"-",y:0}}};b.splitPath=function(o){var n;o=o.replace(/([A-Za-z])/g," $1 ");o=o.replace(/^\s*/,"").replace(/\s*$/,"");o=o.split(/[ ,]+/);for(n=0;n<o.length;n++){if(!/[a-zA-Z]/.test(o[n])){o[n]=parseFloat(o[n]);}}return o;};b.maps={};
b.wrap(g.prototype,"init",function(o,n,p){if(n.options.chart.type==="map"){i(this,{getSeriesExtremes:function(){var s=this.isXAxis,r=Number.MAX_VALUE,q=Number.MIN_VALUE;k(this.series,function(t){r=Math.min(r,t[s?"minX":"minY"]);q=Math.max(q,t[s?"maxX":"maxY"]);});this.dataMin=r;this.dataMax=q;},setAxisTranslation:function(){var t=this.chart,r,s=t.plotWidth/t.plotHeight,w=this.isXAxis,q,u=t.xAxis[0],v;
g.prototype.setAxisTranslation.call(this);if(!w&&u.transA!==f){this.transA=u.transA=Math.min(this.transA,u.transA);r=(u.max-u.min)/(this.max-this.min);v=r>s?this:u;q=(v.max-v.min)*v.transA;v.minPixelPadding=(v.len-q)/2;}}});}return o.call(this,n,p);});b.wrap(d.prototype,"render",function(n){n.call(this);
this.renderMapNavigation();});i(d.prototype,{renderMapNavigation:function(){var q=this,o=this.options.mapNavigation,s=o.buttons,u,p,t,r=function(){this.handler.call(q);};if(e(o.enabled,true)){for(u in s){if(s.hasOwnProperty(u)){t=j(o.buttonOptions,s[u]);p=q.renderer.button(t.text,0,0,r).attr({width:t.width,height:t.height}).css(t.style).add();
p.handler=t.onclick;p.align(i(t,{width:p.width,height:p.height}),null,"spacingBox");}}}},fitToBox:function(n,o){k([["x","width"],["y","height"]],function(q){var r=q[0],p=q[1];if(n[r]+n[p]>o[r]+o[p]){if(n[p]>o[p]){n[p]=o[p];n[r]=o[r];}else{n[r]=o[r]+o[p]-n[p];}}if(n[r]<o[r]){n[r]=o[r];}});return n;},mapZoom:function(x){var q=this.xAxis[0],n=q.max-q.min,u=q.min+n/2,r=n*x,o=this.yAxis[0],s=o.max-o.min,t=o.min+s/2,w=s*x,y=u-r/2,v=t-w/2,p=this.fitToBox({x:y,y:v,width:r,height:w},{x:q.dataMin,y:o.dataMin,width:q.dataMax-q.dataMin,height:o.dataMax-o.dataMin});
q.setExtremes(p.x,p.x+p.width,false);o.setExtremes(p.y,p.y+p.height,false);this.redraw();}});l.map=j(l.scatter,{animation:false,minOpacity:0.2,nullColor:"#F8F8F8",borderColor:"silver",borderWidth:1,marker:null,stickyTracking:false,dataLabels:{verticalAlign:"middle"},tooltip:{followPointer:true,headerFormat:'<span style="font-size:10px">{point.key}</span><br/>',pointFormat:"{series.name}: {point.y}<br/>"}});
b.seriesTypes.map=b.extendClass(b.seriesTypes.scatter,{type:"map",pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},colorKey:"y",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:m,getExtremesFromAll:true,init:function(u){var r=this,q=u.options.legend.valueDecimals,s=[],o,x,y,A,t,v,z,w,p,n=u.options.legend.layout==="horizontal";
b.Series.prototype.init.apply(this,arguments);v=r.options.colorRange;if(r.options.valueRanges){k(r.options.valueRanges,function(B){x=B.from;y=B.to;o="";if(x===f){o="< ";}else{if(y===f){o="> ";}}if(x!==f){o+=h(x,q);}if(x!==f&&y!==f){o+=" - ";}if(y!==f){o+=h(y,q);}s.push(b.extend({chart:r.chart,name:o,options:{},drawLegendSymbol:b.seriesTypes.area.prototype.drawLegendSymbol,visible:true,setState:function(){},setVisible:function(){}},B));
});r.legendItems=s;}else{if(v){x=v.from;y=v.to;A=v.fromLabel;t=v.toLabel;w=n?[0,0,1,0]:[0,1,0,0];if(!n){p=A;A=t;t=p;}z={linearGradient:{x1:w[0],y1:w[1],x2:w[2],y2:w[3]},stops:[[0,x],[1,y]]};s=[{chart:r.chart,options:{},fromLabel:A,toLabel:t,color:z,drawLegendSymbol:this.drawLegendSymbol,visible:true,setState:function(){},setVisible:function(){}}];
r.legendItems=s;}}},drawLegendSymbol:function(x,y){var v=x.options.symbolPadding,w=e(x.options.padding,8),q,s,p=this.chart.renderer.fontMetrics(x.options.itemStyle.fontSize).h,n=x.options.layout==="horizontal",u,t,r,o=e(x.options.rectangleLength,200);if(n){q=-(v/2);s=0;}else{q=-o+x.baseline-(v/2);s=w+p;
}y.fromText=this.chart.renderer.text(y.fromLabel,s,q).attr({zIndex:2}).add(y.legendGroup);u=y.fromText.getBBox();y.legendSymbol=this.chart.renderer.rect(n?u.x+u.width+v:u.x-p-v,u.y,n?o:p,n?p:o,2).attr({zIndex:1}).add(y.legendGroup);t=y.legendSymbol.getBBox();y.toText=this.chart.renderer.text(y.toLabel,t.x+t.width+v,n?q:t.y+t.height-v).attr({zIndex:2}).add(y.legendGroup);
r=y.toText.getBBox();if(n){x.offsetWidth=u.width+t.width+r.width+(v*2)+w;x.itemY=p+w;}else{x.offsetWidth=Math.max(u.width,r.width)+(v)+t.width+w;x.itemY=t.height+w;x.itemX=v;}},getBox:function(q){var p=Number.MIN_VALUE,n=Number.MAX_VALUE,o=Number.MIN_VALUE,r=Number.MAX_VALUE;k(q||this.options.data,function(t){var y=t.path,x=y.length,z=false,u=Number.MIN_VALUE,w=Number.MAX_VALUE,s=Number.MIN_VALUE,v=Number.MAX_VALUE;
while(x--){if(typeof y[x]==="number"){if(z){u=Math.max(u,y[x]);w=Math.min(w,y[x]);}else{s=Math.max(s,y[x]);v=Math.min(v,y[x]);}z=!z;}}t._maxX=u;t._minX=w;t._maxY=s;t._minY=v;p=Math.max(p,u);n=Math.min(n,w);o=Math.max(o,s);r=Math.min(r,v);});this.minY=r;this.maxY=o;this.minX=n;this.maxX=p;},translatePath:function(r){var p=this,s=false,q=p.xAxis,n=p.yAxis,o;
r=[].concat(r);o=r.length;while(o--){if(typeof r[o]==="number"){if(s){r[o]=Math.round(q.translate(r[o]));}else{r[o]=Math.round(n.len-n.translate(r[o]));}s=!s;}}return r;},setData:function(){b.Series.prototype.setData.apply(this,arguments);this.getBox();},translate:function(){var n=this,p=Number.MAX_VALUE,o=Number.MIN_VALUE;
n.generatePoints();k(n.data,function(q){q.shapeType="path";q.shapeArgs={d:n.translatePath(q.path)};if(typeof q.y==="number"){if(q.y>o){o=q.y;}else{if(q.y<p){p=q.y;}}}});n.translateColors(p,o);},translateColors:function(r,p){var o=this.options,n=o.valueRanges,q=o.colorRange,u=this.colorKey,t,s;if(q){t=a(q.from);
s=a(q.to);}k(this.data,function(v){var z=v[u],y=[],w,x,A;if(n){x=n.length;while(x--){w=n[x];t=w.from;s=w.to;if((t===f||z>=t)&&(s===f||z<=s)){v.options.color=w.color;break;}}}else{if(q&&z!==undefined){A=(p-z)/(p-r);x=4;while(x--){y[x]=Math.round(s.rgba[x]+(t.rgba[x]-s.rgba[x])*A);}v.options.color=z===null?o.nullColor:"rgba("+y.join(",")+")";
}}});},drawGraph:m,drawDataLabels:m,drawPoints:function(){var o=this,p=o.xAxis,n=o.yAxis,q=o.colorKey;k(o.data,function(r){r.plotY=1;if(r[q]===null){r[q]=0;r.isNull=true;}});b.seriesTypes.column.prototype.drawPoints.apply(o);k(o.data,function(s){var t=s.dataLabels,r=p.toPixels(s._minX,true),v=p.toPixels(s._maxX,true),w=n.toPixels(s._minY,true),u=n.toPixels(s._maxY,true);
s.plotX=Math.round(r+(v-r)*e(t&&t.anchorX,0.5));s.plotY=Math.round(w+(u-w)*e(t&&t.anchorY,0.5));if(s.isNull){s[q]=null;}});b.Series.prototype.drawDataLabels.call(o);}});b.Map=function(o,q){var p={endOnTick:false,gridLineWidth:0,labels:{enabled:false},lineWidth:0,minPadding:0,maxPadding:0,startOnTick:false,tickWidth:0,title:null},n;
n=o.series;o.series=null;o=j({chart:{type:"map",panning:"xy"},xAxis:p,yAxis:j(p,{reversed:true})},o,{chart:{inverted:false}});o.series=n;return new b.Chart(o,q);};}(Highcharts));